### 基础

#### 1、高并发系统，通用设计方案

高并发类比于洪水（超级大的流量）

- 纵向扩展（单机有极限）
- 横向扩展（引入复杂度） 
  - 多个节点如何保证一致性
  - 如何做到使用方无感知的增加和删除节点
- 缓存（引入复杂度）：**将任何降低响应时间的中间存储都称为缓存**
  - 
- 异步（引入复杂度）



tips：系统的设计是不断演进的，不同量级的系统有不同的痛点，无脑引入上面的各种方法，反而会适得其反

#### 2、架构分层

随着业务的复杂，大量代码耦合在一起，会出现逻辑不清晰、各模块相互依赖、扩展性差等问题。这时候架构就需要分层了

常见的有：

- MVC
- OSI模型（七层和四层模型）
- 等等

> 分层的好处

1、可以简化系统设计，让不同的人专注做某一层次

2、可以复用某一层的代码，减少研发周期，提升研发效率

3、**分层架构可以让我们更容易做横向扩展**  （抽取某一层单独部署服务，做扩展）



阿里系统分层

![image-20240416221558209](/Users/xuying/Library/Application Support/typora-user-images/image-20240416221558209.png)

> 分层的缺点

增加了代码的复杂度：

- 每一层都有数据传递，小改动可能会改特别多层，增加了开发和调试成本
- 如果每层都独立部署，那么会有性能损失